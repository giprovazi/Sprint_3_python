import tkinter as tk
import csv
import os

def carregar_pedidos():
    pedidos = []
    if os.path.exists('refeicoes.csv'):
        with open('refeicoes.csv', mode='r', encoding='utf-8') as arquivo_csv:
            leitor = csv.reader(arquivo_csv)
            for linha in leitor:
                if len(linha) == 5:
                    pedidos.append(linha)  
    return pedidos

def exibir_pedidos():
    pedidos = carregar_pedidos()

    for widget in frame_pedidos.winfo_children():
        widget.destroy()

    if not pedidos:
        tk.Label(frame_pedidos, text="Nenhum pedido encontrado.", font=("Arial", 14), bg="#f0f0f0").pack(pady=10)
        return

    for i, pedido in enumerate(pedidos):
        nome, quarto, data, hora, alimentos = pedido
        texto = f"Pedido {i+1}:\nNome: {nome}\nQuarto: {quarto}\nData: {data}\nHora: {hora}\nAlimentos: {alimentos}"
        tk.Label(frame_pedidos, text=texto, font=("Arial", 12), bg="#f0f0f0", anchor="center", justify="left").pack(fill="x", padx=40, pady=8)

def atualizar_periodicamente():
    exibir_pedidos()
    root_cozinha.after(3000, atualizar_periodicamente)  

root_cozinha = tk.Tk()
root_cozinha.geometry("800x800")
root_cozinha.title("Cozinha - NutriSabar√°")
root_cozinha.configure(bg='#1f4e79')

tk.Label(root_cozinha, text="Pedidos para a Cozinha", font=("Arial", 26, "bold"), fg="red", bg="#1f4e79").pack(pady=(20, 10))

frame_pedidos = tk.Frame(root_cozinha, bg="#f0f0f0", padx=20, pady=20)
frame_pedidos.pack(fill="both", expand=True, padx=20, pady=10)

atualizar_periodicamente()

root_cozinha.mainloop()
